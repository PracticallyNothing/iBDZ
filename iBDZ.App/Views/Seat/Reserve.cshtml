@{ ViewData["Title"] = "Reserve"; }

<h2 class="text-center">Reserve seats</h2>

@using iBDZ.Data.ViewModels
@model ReservationInfoModel

<form onsubmit="finalizePurchase(event)">
    <div class="text-center">
        <hr />

        <h2>Train: @Model.TrainId</h2>
        <h3>Car ID: <b>@Model.CarId</b></h3>
        <h4>Type: <b>@Model.Type.ToString()</b></h4>
        <h4>Class: <b>@Model.Class.ToString()</b></h4>

        <hr />

        <h3>Coupe: <b>@Model.Coupe</b></h3>
        <label for="num-seats">Number of seats</label>
        <input name="num-seats" type="number" min="1" max="@Model.FreeSeats.Count" />

        <hr />

        <h3>Price of purchase: <b>@String.Format("{0:F2}", Model.BasePrice)</b></h3>

        <hr />

        <button type="submit">Purchase seats</button>
    </div>

</form>

<script>
    var form = document.getElementById("purchase-form")

    function finalizePurchase(event) {
        event.preventDefault();

        let data = {
            carId: "asdf",
            seats: [],
            priceLevs: 16.99
        };

        postDataAsJSON(
            '/Seat/Reserve',
            data,
            function () {
            })
    }
</script>